<ion-content class="flex flex-col h-full">
  <!-- HEADER -->
  <div class="logcomplainModalBG flex justify-between items-center px-4 py-3 border-b flex-shrink-0">
    <h2 class="text-lg font-bold text-white">Talents</h2>
    <button (click)="close()" class="text-2xl font-bold text-white">
      <ion-icon name="close-outline"></ion-icon>
    </button>
  </div>

  <!-- Main Content Container -->
  <div class="flex flex-col h-full">
    <!-- Search + Filter Row -->
    <div class="flex-shrink-0 flex flex-col justify-between gap-3 px-4 sm:px-6 py-4">
      <!-- Skill Level Filter -->
      <select
        [(ngModel)]="selectedSkillLevel"
        aria-label="Filter by Skill Level"
        class="w-full sm:w-1/4 px-3 py-3 border border-gray-300 bg-white rounded-xl shadow-sm text-sm outline-none text-gray-700"
      >
        <option class="text-gray-200" value="" disabled selected hidden>
          Filter by Skill Level
        </option>
        <option value="Beginner">Beginner</option>
        <option value="Intermediate">Intermediate</option>
        <option value="Expert">Expert</option>
        <option value="">-- Return all data --</option>
      </select>

      <!-- Search Box -->
      <div class="relative w-full sm:w-1/2">
        <ion-icon
          name="search-outline"
          class="absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"
        ></ion-icon>
        <input
          type="text"
          [(ngModel)]="searchQuery"
          placeholder="Search by user"
          class="w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 focus:outline-none placeholder:text-gray-400"
        />
      </div>
    </div>

    <!-- Table Content Area -->
    <div *ngIf="paginatedHires.length > 0; else noDataPage" class="flex flex-col flex-grow min-h-0">
      
      <!-- TABLE Container -->
      <div class="flex-grow overflow-hidden">
        <div class="overflow-x-auto h-full">
          <table class="min-w-full text-sm text-left text-gray-700">
            <thead class="border-b text-xs uppercase text-gray-500 bg-gray-50 sticky top-0">
              <tr>
                <th class="px-3 py-2">Name</th>
                <th class="px-3 py-2">Proximity</th>
                <th class="px-3 py-2">Skill Level</th>
                <th class="px-3 py-2">Pay Range</th>
                <th class="px-3 py-2">Status</th>
              </tr>
            </thead>

            <tbody class="divide-y divide-gray-100">
              <tr
                *ngFor="let hire of paginatedHires"
                class="hover:bg-gray-50 transition-colors cursor-pointer"
                (click)="openTalentModal(hire)"
              >
                <!-- Profile + Name -->
                <td class="px-3 py-2 flex items-center gap-2">
                  <img
                    class="w-8 h-8 rounded-full object-cover ring-1 ring-gray-100"
                    [src]="hire.profilePic"
                    alt="{{ hire.name }}"
                  />
                  <div>
                    <p class="text-sm font-medium text-gray-900">
                      {{ hire.name }}
                    </p>
                    <p class="text-xs text-gray-500">
                      {{ hire.email }}
                    </p>
                  </div>
                </td>

                <!-- Proximity -->
                <td class="px-3 py-2 text-xs text-gray-600 whitespace-nowrap">
                  {{ hire.proximity }}
                </td>

                <!-- Skill Level -->
                <td class="px-3 py-2 font-semibold text-gray-600 text-sm whitespace-nowrap">
                  {{ hire.skillSet[0]?.skillLevel }}
                </td>

                <!-- Pay Range -->
                <td class="px-3 py-2 font-semibold text-gray-600 text-sm whitespace-nowrap">
                  {{ hire.payRange }}
                </td>

                <!-- Status -->
                <td class="px-3 py-2 whitespace-nowrap">
                  <span
                    class="inline-flex items-center gap-2 px-2 py-1 rounded-full text-xs font-semibold"
                  >
                    <span
                      class="h-2 w-2 rounded-full"
                      [style.backgroundColor]="getStatusColor(hire.status)"
                    ></span>
                    <span>{{ hire.status }}</span>
                  </span>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- Pagination FIXED at bottom -->
      <div class="flex-shrink-0">
        <div class="flex justify-between items-center px-4 py-2 gap-3 bg-gray-50 border-t border-gray-200">
          <button
            (click)="prevPage()"
            [disabled]="currentPage === 1"
            class="pagination-button flex items-center px-3 py-1 gap-2 border border-gray-500 rounded-lg text-sm font-medium bg-white hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition"
          >
            <ion-icon name="chevron-back-outline"></ion-icon>
            Previous
          </button>

          <span class="flex gap-2 text-sm text-gray-600 items-center">
            <span
              class="bg-indigo-50 text-indigo-600 font-medium px-2 py-1 rounded-md"
            >
              {{ currentPage }}
            </span>
            <span class="bg-gray-100 px-2 py-1 rounded-md">
              {{ totalPages }}
            </span>
          </span>

          <button
            (click)="nextPage()"
            [disabled]="currentPage === totalPages"
            class="pagination-button flex items-center px-3 py-1 gap-2 border border-gray-500 rounded-lg text-sm font-medium bg-white hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition"
          >
            Next <ion-icon name="chevron-forward-outline"></ion-icon>
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- No Data Full Page -->
  <ng-template #noDataPage>
    <div class="flex flex-col items-center justify-center h-full px-6 py-10">
      <img
        class="w-[232px] h-[246px]"
        [src]="images.NoDataImage"
        alt="No Data"
      />
      <div class="text-center space-y-2 mt-6">
        <h3 class="text-[#000000] font-semibold text-[20px]">
          Oops! No Data Available
        </h3>
        <p class="text-[#000000] text-[16px]">
          No talents found matching your criteria
        </p>
      </div>
    </div>
  </ng-template>

  <!-- REMOVED: Separate close button since header already has one -->
</ion-content>