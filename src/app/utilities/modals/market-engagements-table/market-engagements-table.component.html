<div class="overflow-x-auto">
  <!-- Add filters if needed -->
  <div class="p-4 bg-gray-50 border-b">
    <div class="flex flex-wrap gap-4 items-center">
      <!-- Status Filter -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1"
          >Status</label
        >
        <select
          [(ngModel)]="statusFilter"
          (change)="applyFilters()"
          class="border border-gray-300 rounded-md px-3 py-2 text-sm"
        >
          <option value="">All Status</option>
          <option value="awaiting-acceptance">Awaiting Acceptance</option>
          <option value="offer-accepted">Offer Accepted</option>
          <option value="offer-declined">Offer Declined</option>
        </select>
      </div>

      <!-- Talent ID Filter -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1"
          >Talent ID</label
        >
        <input
          type="text"
          [(ngModel)]="talentIdFilter"
          (keyup.enter)="applyFilters()"
          placeholder="Enter Talent ID"
          class="border border-gray-300 rounded-md px-3 py-2 text-sm"
        />
      </div>

      <!-- Clear Filters -->
      <div class="flex items-end">
        <button
          (click)="clearFilters()"
          class="bg-gray-200 hover:bg-gray-300 px-3 py-2 rounded-md text-sm font-medium"
        >
          Clear Filters
        </button>
      </div>
    </div>
  </div>

  <table class="min-w-full text-sm text-left text-gray-700">
    <thead class="border-b text-xs uppercase text-gray-500">
      <tr>
        <th class="px-4 py-3">Talent Name</th>
        <th class="px-4 py-3">Date of Hire</th>
        <th class="px-4 py-3">Start Date</th>
        <th class="px-4 py-3">Agreed Amount</th>
        <th class="px-4 py-3">Hire Status</th>
      </tr>
    </thead>

    <tbody
      *ngIf="paginatedHires.length > 0; else noDataTable"
      class="divide-y divide-gray-100"
    >
      <tr
        *ngFor="let hire of paginatedHires"
        class="hover:bg-gray-50 transition-colors cursor-pointer"
        (click)="openHireModal(hire)"
      >
        <!-- Profile + Name -->
        <td
          class="w-[260px] px-3 sm:px-6 py-3 flex items-center gap-2 sm:gap-3"
        >
          <img
            class="w-8 h-8 sm:w-10 sm:h-10 rounded-full object-cover ring-1 sm:ring-2 ring-gray-100"
            [src]="hire.profilePic || 'assets/images/default-avatar.png'"
            [alt]="hire.talentName"
          />
          <div>
            <p class="text-sm sm:text-base font-medium text-gray-900">
              {{ hire.talentName }}
            </p>
            <p class="text-xs sm:text-sm text-gray-500">
              {{ hire.talentEmail }}
            </p>
          </div>
        </td>

        <!-- Date of Hire -->
        <td
          class="px-3 sm:px-6 py-3 text-xs sm:text-sm text-gray-600 whitespace-nowrap"
        >
          {{ hire.dateOfHire | date : "mediumDate" }}
        </td>

        <!-- Start Date -->
        <td
          class="px-3 sm:px-6 py-3 font-semibold text-gray-600 text-sm sm:text-base whitespace-nowrap"
        >
          {{ hire.startDate | date : "mediumDate" }}
        </td>

        <!-- Amount -->
        <td
          class="px-3 sm:px-6 py-3 font-semibold text-gray-600 text-sm sm:text-base whitespace-nowrap"
        >
          {{ getFormattedAmount(hire.agreedAmount) }}
        </td>

        <!-- Status -->
        <td class="px-3 sm:px-6 py-3 whitespace-nowrap">
          <span
            class="inline-flex items-center gap-2 px-3 py-1 rounded-full text-xs font-semibold"
          >
            <!-- colored dot -->
            <span
              class="h-2 w-2 rounded-full"
              [style.backgroundColor]="getStatusColor(hire.hireStatus)"
            ></span>
            <span>
              {{ mapApiStatusToComponent(hire.hireStatus) }}
            </span>
          </span>
        </td>
      </tr>
    </tbody>
  </table>

  <!-- No Data Template -->
  <ng-template #noDataTable>
    <tbody>
      <tr>
        <td colspan="5" class="text-center text-gray-500 py-6">
          No market engagements found
        </td>
      </tr>
    </tbody>
  </ng-template>
</div>

<!-- Pagination -->
<div
  *ngIf="paginatedHires.length > 0"
  class="flex justify-between items-center px-4 sm:px-6 py-3 gap-3 bg-gray-50 border-t border-gray-200"
>
  <button
    (click)="prevPage()"
    [disabled]="currentPage === 1"
    class="pagination-button flex items-center px-3 py-2 gap-2 border border-gray-500 rounded-lg text-sm font-medium bg-white hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition"
  >
    <ion-icon name="chevron-back-outline"></ion-icon>
    Previous
  </button>

  <span class="flex gap-2 text-xs sm:text-sm text-gray-600 items-center">
    <span
      class="bg-indigo-50 text-indigo-600 font-medium px-2 sm:px-3 py-1 rounded-md"
    >
      {{ currentPage }}
    </span>
    <span class="bg-gray-100 px-2 sm:px-3 py-1 rounded-md">
      {{ totalPages }}
    </span>
  </span>

  <button
    (click)="nextPage()"
    [disabled]="currentPage === totalPages"
    class="pagination-button flex items-center px-3 py-2 gap-2 border border-gray-500 rounded-lg text-sm font-medium bg-white hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition"
  >
    Next <ion-icon name="chevron-forward-outline"></ion-icon>
  </button>
</div>

<!-- Modal -->
<app-total-delivery-evaluation
  [hire]="selectedHire"
  [isModalOpen]="isModalOpen"
  (close)="closeModal()"
></app-total-delivery-evaluation>
