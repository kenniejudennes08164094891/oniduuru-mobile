<!-- hires-table.component.html - Fixed -->
<div *ngIf="isLoading" class="text-center py-8">
  <div
    class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"
  ></div>
  <p class="mt-2 text-gray-600">Loading hires...</p>
</div>

<div *ngIf="!isLoading">
  <div *ngIf="paginatedHires.length > 0; else noDataTable">
    <div class="overflow-x-auto">
      <table class="min-w-[700px] sm:min-w-full divide-y divide-gray-200">
        <thead class="bg-gray-50 uppercase">
          <tr>
            <th
              class="w-[220px] px-4 sm:px-6 py-2 sm:py-3 text-left text-xs sm:text-sm font-semibold text-gray-700"
            >
              Scouter Name
            </th>
            <th
              class="px-4 sm:px-6 py-2 sm:py-3 text-left text-xs sm:text-sm font-semibold text-gray-700"
            >
              Date of Hire
            </th>
            <th
              class="px-4 sm:px-6 py-2 sm:py-3 text-left text-xs sm:text-sm font-semibold text-gray-700"
            >
              Start Date
            </th>
            <th
              class="px-4 sm:px-6 py-2 sm:py-3 text-left text-xs sm:text-sm font-semibold text-gray-700"
            >
              Agreed Amount
            </th>
            <th
              class="px-4 sm:px-6 py-2 sm:py-3 text-left text-xs sm:text-sm font-semibold text-gray-700"
            >
              Hire Status
            </th>
          </tr>
        </thead>

        <tbody class="divide-y divide-gray-100">
          <tr
            *ngFor="let hire of paginatedHires"
            (click)="selectHire(hire)"
            class="hover:bg-gray-50 transition-colors cursor-pointer"
          >
            <!-- Profile + Name -->
            <td class="w-[220px] px-4 sm:px-6 py-3 flex items-center gap-3">
              <div>
                <p
                  class="text-sm sm:text-base font-medium text-gray-900 truncate max-w-[150px]"
                >
                  {{ hire.name || "Unknown" }}
                </p>
                <p
                  class="text-xs sm:text-sm text-gray-500 truncate max-w-[150px]"
                >
                  {{ hire.email || "No email" }}
                </p>
              </div>
            </td>

            <!-- Hire Date + Time -->
            <td class="min-w-[180px] sm:px-6 py-3">
              <p class="text-sm sm:text-base font-medium text-gray-900">
                {{ getFormattedDateTime(hire.date).date }}
              </p>
              <p class="text-xs text-gray-400">
                {{ getFormattedDateTime(hire.date).time }}
              </p>
            </td>

            <!-- Start Date -->
            <td
              class="min-w-[180px] px-4 sm:px-6 py-3 text-sm sm:text-base text-gray-700"
            >
              {{ hire.startDate || "Not set" }}
            </td>

            <!-- Amount -->
            <td
              class="px-4 sm:px-6 py-3 font-semibold text-gray-600 text-sm sm:text-base whitespace-nowrap"
            >
              {{ getFormattedAmount(hire.amount) }}
            </td>

            <!-- Status -->
            <td class="px-4 sm:px-6 py-3 whitespace-nowrap">
              <span
                class="inline-flex items-center gap-2 px-3 py-1 rounded-full text-xs font-semibold"
              >
                <span
                  class="h-2 w-2 rounded-full"
                  [style.backgroundColor]="getStatusColor(hire.status)"
                ></span>
                {{ hire.status || "Unknown" }}
              </span>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Pagination -->
    <div
      *ngIf="paginatedHires.length > 0"
      class="flex justify-between items-center px-4 sm:px-6 py-3 gap-3 bg-gray-50 border-t border-gray-100"
    >
      <button
        (click)="prevPage()"
        [disabled]="currentPage === 1"
        class="pagination-button flex items-center px-3 py-2 gap-2 border-2 border-gray-500 rounded-lg text-sm font-medium bg-white hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition"
      >
        <ion-icon name="chevron-back-outline"></ion-icon>
        Previous
      </button>

      <span class="flex gap-2 text-xs sm:text-sm text-gray-600 items-center">
        <span
          class="bg-indigo-50 text-indigo-600 font-medium px-2 sm:px-3 py-1 rounded-md"
        >
          {{ currentPage }}
        </span>
        <span class="text-gray-500">of</span>
        <span class="bg-gray-100 px-2 sm:px-3 py-1 rounded-md">
          {{ totalPages }}
        </span>
        <span class="text-xs text-gray-500">
          ({{ filteredAndSearchedHires.length }} total)
        </span>
      </span>

      <button
        (click)="nextPage()"
        [disabled]="currentPage === totalPages"
        class="pagination-button flex items-center px-3 py-2 gap-1 sm:gap-2 border border-gray-400 rounded-lg text-xs sm:text-sm bg-white hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition"
      >
        Next <ion-icon name="chevron-forward-outline"></ion-icon>
      </button>
    </div>

    <!-- Load More Button (Optional) -->
    <div *ngIf="shouldShowLoadMore" class="text-center py-4">
      <button
        (click)="onLoadMoreClick()"
        class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"
      >
        Load More Hires
      </button>
    </div>

    <!-- Loading More Indicator -->
    <div *ngIf="isFetchingMore" class="text-center py-4">
      <div
        class="inline-block animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"
      ></div>
      <p class="mt-2 text-gray-600 text-sm">Loading more hires...</p>
    </div>
  </div>

  <ng-template #noDataTable>
    <div
      class="text-center py-12 text-gray-500 border border-dashed border-gray-300 rounded-lg"
    >
      <div class="flex flex-col items-center">
        <img
          src="assets/images/no-data.png"
          alt="No data"
          class="w-24 h-24 mb-4 opacity-50"
        />
        <p class="text-lg font-medium">No hires found</p>
        <p class="text-sm mt-1">When you have hires, they will appear here.</p>
      </div>
    </div>
  </ng-template>
</div>
