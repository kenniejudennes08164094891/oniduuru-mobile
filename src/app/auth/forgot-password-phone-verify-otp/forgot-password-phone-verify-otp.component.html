<body>
  <ion-content class="h-screen [--background:transparent] p-0">
    <ion-grid class="h-full grid grid-rows-4 bg-transparent w-full flex justify-center">
      <ion-row class="flex justify-center items-center bg-transparent">
        <ion-col></ion-col>
      </ion-row>

      <ion-row class="flex justify-center items-center bg-transparent">
        <ion-col>
          <div class="flex justify-center items-center h-full">
            <div class="w-full max-w-md bg-white rounded-xl p-6 shadow-lg">

              <h2 class="text-[28px] text-[#101828] font-semibold mb-2">
                Input OTP for verification
              </h2>

              <p class="text-[16px] text-[#101828] mb-6">
                OTP has been sent to the registered {{ maskedPhoneNumber }}
              </p>

              <!-- OTP Input Boxes -->
              <div class="flex justify-center gap-4 mb-6">
                <input
                  #otpInput
                  type="text"
                  inputmode="numeric"
                  maxlength="1"
                  (input)="onOtpInput($event, 0)"
                  (keydown)="onOtpKeyDown($event, 0)"
                  class="w-16 h-16 text-center text-2xl border-2 border-gray-300 rounded-lg focus:outline-none focus:border-blue-500 bg-transparent"
                />
                <input
                  #otpInput
                  type="text"
                  inputmode="numeric"
                  maxlength="1"
                  (input)="onOtpInput($event, 1)"
                  (keydown)="onOtpKeyDown($event, 1)"
                  class="w-16 h-16 text-center text-2xl border-2 border-gray-300 rounded-lg focus:outline-none focus:border-blue-500 bg-transparent"
                />
                <input
                  #otpInput
                  type="text"
                  inputmode="numeric"
                  maxlength="1"
                  (input)="onOtpInput($event, 2)"
                  (keydown)="onOtpKeyDown($event, 2)"
                  class="w-16 h-16 text-center text-2xl border-2 border-gray-300 rounded-lg focus:outline-none focus:border-blue-500 bg-transparent"
                />
                <input
                  #otpInput
                  type="text"
                  inputmode="numeric"
                  maxlength="1"
                  (input)="onOtpInput($event, 3)"
                  (keydown)="onOtpKeyDown($event, 3)"
                  class="w-16 h-16 text-center text-2xl border-2 border-gray-300 rounded-lg focus:outline-none focus:border-blue-500 bg-transparent"
                />
              </div>

              <p *ngIf="error" class="text-red-500 text-sm mb-3 text-center">
                {{ error }}
              </p>

              <!-- Resend OTP Text -->
              <div class="text-center mb-6">
                <p class="text-[14px] text-[#667085]">
                  Didn't receive a code?
                  <button
                    type="button"
                    (click)="reInitiateOtp()"
                    [disabled]="countdown > 0"
                    class="text-[#101323] font-semibold cursor-pointer hover:underline disabled:text-gray-400 disabled:cursor-not-allowed"
                  >
                    Re-initiate OTP process
                  </button>
                  <span *ngIf="countdown > 0" class="text-[#667085] ml-2">{{ countdown }}s</span>
                </p>
              </div>

              <!-- Buttons -->
              <button
                type="button"
                (click)="verifyOtp()"
                [ngClass]="isOtpComplete() ? 'bg-[#101323] text-white' : 'bg-[#D0D5DD] text-white'"
                [disabled]="!isOtpComplete() || loading"
                class="w-full py-3 rounded-md font-semibold mb-3"
              >
                {{submitBtn}}
              </button>

              <button
                type="button"
                (click)="goBack()"
                class="bg-[#101323] hover:bg-gray-800 border-gray-700 text-[#FFFFFF] font-bold py-3 px-4 rounded w-full"
              >
                Route Back
              </button>

            </div>
          </div>
        </ion-col>
      </ion-row>
    </ion-grid>
  </ion-content>
</body>
