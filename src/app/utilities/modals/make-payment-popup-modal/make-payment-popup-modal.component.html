<ion-header>
  <div class="items-center flex justify-between h-20 px-4 bg-[#CDD5DF33]">
    <p class="text-[#CC0000] text-[24px] font-semibold item-start">
      Oniduuru Payment Invoice
    </p>
    <ion-buttons slot="end" class="">
      <ion-button (click)="dismiss()">
        <ion-icon name="close" class="text-black"></ion-icon>
      </ion-button>
    </ion-buttons>
  </div>
</ion-header>

<ion-content>
  <div class="text-[#444444] space-y-5 px-4 py-4">
    <h3 class="text-[18px]">
      Hi, <span class="font-bold text-[18px] text-[#444444]">{{ userName }}</span>,
    </h3>
    <p class="text-[18px]">
      Thank you for trusting Oniduuru to find skilled professionals in your
      vicinity.
      <br />Please be aware that a
      <span class="font-bold text-[#444444]"> yearly one-time payment </span>
      is required before receiving our services.
      <br />
      We appreciate your cooperation.
    </p>
  </div>

  <div class="px-4 flex flex-col items-end mt-4 space-y-1">
    <h3 class="text-[16px] text-[#CC0000]">Invoice ID:</h3>
    <p class="text-[16px]">#{{ invoiceId }}</p>
    <p class="text-[16px]">{{ invoiceDate }}</p>
  </div>

  <!-- Loading State -->
  <div *ngIf="isLoading" class="px-4 mt-6">
    <div class="bg-[#CDD5DF33] border-t border-1 border-[#364152] rounded-xl px-3 py-12 flex justify-center items-center">
      <ion-spinner name="crescent"></ion-spinner>
      <span class="ml-3">Loading payment details...</span>
    </div>
  </div>

  <!-- Payment Details Card -->
  <div *ngIf="!isLoading" class="px-4 mt-6">
    <div
      *ngFor="let item of paymentDetails"
      class="bg-[#CDD5DF33] border-t border-1 border-[#364152] rounded-xl px-3 py-6 flex justify-between items-center"
    >
      <!-- Label -->
      <p class="text-[#CC0000] text-sm font-semibold">{{ item.label }}</p>

      <!-- Value + optional copy icon -->
      <div class="flex items-center space-x-2 text-right">
        <p
          class="text-sm"
          [ngClass]="{ 'font-bold': item.bold, 'font-medium': !item.bold }"
        >
          {{ item.value }}
        </p>
        <ion-icon
          *ngIf="item.isCopy && !item.copied"
          name="copy-outline"
          class="text-lg text-[#3E4784] font-semibold cursor-pointer"
          (click)="copyToClipboard(item)"
        ></ion-icon>

        <ion-icon
          *ngIf="item.isCopy && item.copied"
          name="checkmark-outline"
          class="text-lg text-green-600 font-semibold"
        ></ion-icon>
      </div>
    </div>
  </div>

  <div class="px-4 py-10">
    <button
      class="bg-[#101828] rounded-lg w-full py-2 text-white font-medium cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed"
      (click)="goToActivateAccount()"
      [disabled]="isLoading"
    >
      {{ isLoading ? 'Loading...' : 'Save' }}
    </button>
  </div>
</ion-content>