<ion-header>
  <app-scouter-header></app-scouter-header>
</ion-header>

<ion-content class="ion-padding">
  <!-- Top card -->
  <div
    class="paid-dark-card-background relative rounded-lg px-4 py-10 mb-6 overflow-hidden"
  >
    <div class="relative z-10 text-white">
      <div class="flex items-start gap-3">
        <img [src]="images.ViewHireFolderIcon" alt="" />
        <div class="items-center">
          <span class="font-medium text-[24px] leading-tight">
            Hi Viki West,
          </span>
          <p class="text-gray-200 text-lg leading-relaxed">
            View specific details of your fund deposit request.
          </p>
        </div>
      </div>
    </div>
  </div>

  <div class="space-y-5">
    <div
      class="space-y-5 bg-[#F8FAFC] border-[1px] border-[#E3E5EA] text-center py-6 rounded-lg shadow-lg"
    >
      <div class="">
        <h4 class="text-[20px] text-[#101828] font-semibold">
          Designated Wallet Name
        </h4>
        <p class="text-[16px] text-[#919194] font-normal">
          {{ deposit?.walletName }}
        </p>
      </div>
    </div>
    <div
      class="bg-[#F8FAFC] border-[1px] border-[#E3E5EA] text-center py-6 rounded-lg shadow-lg"
    >
      <div class="">
        <h4 class="text-[20px] text-[#101828] font-semibold">
          Designated Wallet Account
        </h4>
        <p class="text-[16px] text-[#919194] font-normal">
          {{ deposit?.walletAcctNo }}
        </p>
      </div>
    </div>
    <div
      class="space-y-5 bg-[#F8FAFC] border-[1px] border-[#E3E5EA] text-center py-6 rounded-lg shadow-lg"
    >
      <div class="">
        <h4 class="text-[20px] text-[#101828] font-semibold">
          Amount Deposited
        </h4>
        <p class="text-[16px] text-[#919194] font-normal">
          ₦{{ deposit?.amount | number }}
        </p>
      </div>
    </div>
    <div
      class="space-y-5 bg-[#F8FAFC] border-[1px] border-[#E3E5EA] text-center py-6 rounded-lg shadow-lg"
    >
      <div class="">
        <h4 class="text-[20px] text-[#101828] font-semibold">
          Deposit Identifiers
        </h4>
        <p class="text-[16px] text-[#919194] font-normal">
          {{ deposit?.identifier }}
        </p>
      </div>
    </div>
    <div
      class="space-y-5 bg-[#F8FAFC] border-[1px] border-[#E3E5EA] text-center py-6 rounded-lg shadow-lg"
    >
      <div class="">
        <h4 class="text-[20px] text-[#101828] font-semibold">
          Agreed to terms
        </h4>
        <p class="text-[16px] text-[#919194] font-normal">Yes</p>
      </div>
    </div>
    <div
      class="space-y-5 bg-[#F8FAFC] border-[1px] border-[#E3E5EA] text-center py-6 rounded-lg shadow-lg"
    >
      <div class="">
        <h4 class="text-[20px] text-[#101828] font-semibold">Payment Status</h4>

        <span *ngIf="deposit as d">
          <span
            [ngClass]="[
              'rounded-full h-2 w-2 inline-block',
              d.status === 'Successful' ? 'bg-[#057A55]' : '',
              d.status === 'Invalid' ? 'bg-[#EB0B00]' : '',
              d.status === 'Failed' ? 'bg-[#EB0B00]' : '',
              d.status === 'Reversed' ? 'bg-[#0033FF]' : ''
            ]"
          ></span>
          {{ d.status }}
        </span>
      </div>
    </div>
    <div
      class="space-y-5 bg-[#F8FAFC] border-[1px] border-[#E3E5EA] text-center py-6 rounded-lg shadow-lg"
    >
      <div class="">
        <h4 class="text-[20px] text-[#101828] font-semibold">
          Date of Deposit Request
        </h4>
        <p class="text-[16px] text-[#919194] font-normal">
          {{ deposit?.date | date : "MMM d, y h:mma" }}
        </p>
      </div>
    </div>
    <div
      class="space-y-5 bg-[#F8FAFC] border-[1px] border-[#E3E5EA] text-center py-6 rounded-lg shadow-lg"
    >
      <div class="">
        <h4 class="text-[20px] text-[#101828] font-semibold">
          Deposit Reference ID
        </h4>
        <p class="text-[16px] text-[#919194] font-normal">
          0447429947-Jul 1, 2025, 7:34 AM-0325062797
        </p>
      </div>
    </div>
    <div
      class="space-y-5 bg-[#F8FAFC] border-[1px] border-[#E3E5EA] text-center py-6 rounded-lg shadow-lg"
    >
      <div class="">
        <h4 class="text-[20px] text-[#101828] font-semibold">
          Reason for Deposit
        </h4>
        <p class="text-[16px] text-[#919194] font-normal">
          {{ deposit?.reason }}
        </p>
      </div>
    </div>
  </div>

  <!-- THEN A VERSION OF THE RECIEPT GENERATED GOES HERE -->
  <div class="p-4 mt-10">
    <div
      id="receipt"
      class="bg-white rounded-2xl shadow-lg w-[350px] mx-auto border border-[#E3E5EA] overflow-hidden"
    >
      <!-- Header -->
      <div
        class="logcomplainModalBG flex justify-center items-center px- py-2 border-b bg-[#1A1A1A] rounded-t-xl"
      >
        <h2 class="text-lg font-bold text-white">Funds Deposit Receipt</h2>
      </div>

      <!-- Powered by -->
      <p class="text-center text-[#49536E] text-[12px] py-3">
        Powered by Shoft Africa ❤️
      </p>

      <!-- Gradient line -->
      <div
        class="w-[90%] h-[6px] rounded-full mx-auto"
        style="background: linear-gradient(to right, #daa21f, #cc0000, #057a55)"
      ></div>

      <!-- Sender and Receiver -->
      <div class="flex justify-between px-6 py-5 text-[13px]">
        <div>
          <p class="text-[#49536E] font-medium">From</p>
          <p class="font-semibold text-[#101828]">
            {{ deposit?.walletName || "User Wallet" }}
          </p>
          <p class="text-[#919194] text-[12px]">Wallet ID: Admin Wallet</p>
        </div>
        <div class="text-right">
          <p class="text-[#49536E] font-medium">To</p>
          <p class="font-semibold text-[#101828]">Omoshein Kehinde Chisom</p>
          <p class="text-[#919194] text-[12px]">Wallet ID: 0447429947</p>
        </div>
      </div>

      <!-- Transaction Info Box -->
      <div
        class="bg-[#F9FAFB] mx-4 p-4 rounded-lg text-[#49536E] text-[12px] space-y-2"
      >
        <div class="flex justify-between">
          <span>Amount</span>
          <span class="text-[#057A55] font-semibold text-[14px]"
            >₦{{ deposit?.amount | number }}</span
          >
        </div>
        <div class="flex justify-between">
          <span>Transaction ID</span>
          <span>{{ referenceId }}</span>
        </div>
        <div class="flex justify-between">
          <span>Date</span>
          <span>{{ deposit?.date | date : "MMM d, y, h:mma" }}</span>
        </div>
        <div class="flex justify-between">
          <span>Status</span>
          <span *ngIf="deposit as d">
            <span
              [ngClass]="[
                '',
                d.status === 'Successful' ? 'text-[#057A55]' : '',
                d.status === 'Invalid' ? 'text-[#EB0B00]' : '',
                d.status === 'Failed' ? 'text-[#EB0B00]' : '',
                d.status === 'Reversed' ? 'text-[#0033FF]' : ''
              ]"
            >
              {{ d.status }}
            </span>
          </span>
        </div>
      </div>

      <!-- Footer -->
      <div class="text-center py-6">
        <p class="text-[#49536E] text-[13px] mb-1">
          Thanks for trusting Oniduuru ∯
        </p>
        <p class="text-[#968A64] text-[11px]">
          #Secure. #Fast. #ProudlyAfrican
        </p>
      </div>
    </div>

    <button
      (click)="downloadReceipt()"
      [disabled]="isLoading"
      class="bg-[#101828] text-white px-6 py-2 text-[20px] font-medium rounded-lg mt-10 flex items-center justify-center gap-2 disabled:opacity-70 disabled:cursor-not-allowed"
    >
      <span *ngIf="!isLoading">Download Receipt</span>
      <span *ngIf="isLoading" class="flex items-center gap-2">
        <svg
          class="animate-spin h-5 w-5 text-white"
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
        >
          <circle
            class="opacity-25"
            cx="12"
            cy="12"
            r="10"
            stroke="currentColor"
            stroke-width="4"
          ></circle>
          <path
            class="opacity-75"
            fill="currentColor"
            d="M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"
          ></path>
        </svg>
        <span>Downloading...</span>
      </span>
    </button>
  </div>
</ion-content>
