<ion-header>
  <app-talent-header
    [class.header-hidden]="headerHidden"
    [class.header-visible]="!headerHidden"
  >
  </app-talent-header>
</ion-header>

<ion-content class="ion-padding" *ngIf="hire">
  <div>
    <!-- Top Section -->
    <div
      class="relative rounded-lg px-4 py-10 mb-6 overflow-hidden"
      style="
        background-image: url(&quot;assets/images/Log-complaint-background.png&quot;);
        background-size: cover;
        background-position: center;
      "
    >
      <!-- Dark overlay -->
      <div class="absolute inset-0 bg-black bg-opacity-60 z-0"></div>

      <!-- Content on top -->
      <div class="relative z-10 text-white">
        <div class="flex items-start gap-3">
          <img
            [src]="images.ViewHireFolderIcon"
            alt="Hire Icon"
            class="w-12 h-12 object-contain"
          />
          <div>
            <span class="font-medium text-[24px] leading-tight"
              >{{ userName }}</span
            >
            <p class="text-gray-200 text-lg leading-relaxed">
              View your hires with {{ getScouterDisplayName() }}
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <h3 class="pb-3 text-[#000000] text-[16px] font-semibold">
    Market Price Preposition:
  </h3>

  <!-- Job Info -->
  <div class="bg-[#CDD5DF] rounded-lg shadow px-3 py-5 space-y-3">
    <p class="flex items-center gap-2">
      <img src="assets/icon/Frame 4798.png" alt="icon" class="w-5 h-5" />
      <span>
        <strong>Job Description:</strong>
        {{ hire.jobDescription || hire.originalData?.jobDescription }}
      </span>
    </p>

    <p class="flex items-center gap-2">
      <img src="assets/icon/Frame 4798.png" alt="icon" class="w-5 h-5" />
      <span>
        <strong>Amount to Pay:</strong>
        {{ (hire.amount || hire.amountToPay || 0) | currency : "â‚¦ " }}
      </span>
    </p>

    <p class="flex items-center gap-2">
      <img src="assets/icon/Frame 4798.png" alt="icon" class="w-5 h-5" />
      <span>
        <strong>Date of Hire:</strong>
        {{ getFormattedDateTime(hire.date || hire.dateOfHire)?.date ||
        (hire.date || hire.dateOfHire) }}
      </span>
    </p>

    <p class="flex items-center gap-2">
      <img src="assets/icon/Frame 4798.png" alt="icon" class="w-5 h-5" />
      <span>
        <strong>Your Comment:</strong>
        <span *ngIf="getTalentComment(); else noTalentComment">
          {{ getTalentComment() }}
        </span>
        <ng-template #noTalentComment>
          <span class="text-gray-500 italic">No comment added yet</span>
        </ng-template>
      </span>
    </p>

    <!-- Rating -->
    <div class="flex items-center gap-2">
      <img src="assets/icon/Frame 4798.png" alt="icon" class="w-5 h-5" />
      <strong>Your Rating:</strong>
      <ng-container *ngFor="let star of [1, 2, 3, 4, 5]">
        <ion-icon
          name="star"
          [class.text-yellow-500]="star <= getTalentRating()"
          [class.text-gray-400]="star > getTalentRating()"
          class="text-2xl"
        >
        </ion-icon>
      </ng-container>
    </div>
  </div>

  <div class="bg-[#CDD5DF] rounded-lg shadow px-3 py-5 space-y-3 mt-4">
    <p class="flex items-center gap-2">
      <img src="assets/icon/Frame 4798.png" alt="icon" class="w-5 h-5" />
      <span class="flex gap-1">
        <strong>Hire Status:</strong>
        <span class="inline-flex items-center gap-2">
          <span
            class="inline-block h-3 w-3 rounded-full"
            [ngStyle]="{ 'background-color': getStatusColor(hire.offerStatus || hire.hireStatus || hire.status) }"
          >
          </span>
          {{ formatHireStatus(hire.offerStatus || hire.hireStatus ||
          hire.status) }}
        </span>
      </span>
    </p>

    <p class="flex items-center gap-2">
      <img src="assets/icon/Frame 4798.png" alt="icon" class="w-5 h-5" />
      <span>
        <strong>Scouter's Email:</strong>
        {{ hire.email || hire.scouterEmail }}
      </span>
    </p>

    <p class="flex items-center gap-2">
      <img src="assets/icon/Frame 4798.png" alt="icon" class="w-5 h-5" />
      <span>
        <strong>Start Date:</strong>
        {{ hire.startDate }}
      </span>
    </p>

    <p class="flex items-center gap-2">
      <img src="assets/icon/Frame 4798.png" alt="icon" class="w-5 h-5" />
      <span>
        <strong>Scouter's Comment:</strong>
        <span *ngIf="getScouterComment(); else noScouterComment">
          {{ getScouterComment() }}
        </span>
        <ng-template #noScouterComment>
          <span class="text-gray-500 italic">No comment from scouter yet</span>
        </ng-template>
      </span>
    </p>

    <!-- Scouter Rating Display -->
    <div class="flex items-center gap-2">
      <img src="assets/icon/Frame 4798.png" alt="icon" class="w-5 h-5" />
      <strong>Scouter's Rating:</strong>
      <ng-container *ngFor="let star of [1, 2, 3, 4, 5]">
        <ion-icon
          name="star"
          [class.text-yellow-500]="star <= getScouterRating()"
          [class.text-gray-400]="star > getScouterRating()"
          class="text-2xl"
        >
        </ion-icon>
      </ng-container>
    </div>
  </div>

<!-- Simplified tabs without routing -->
<div class="flex border-b border-gray-300 mb-4 mt-6">
  <!-- Details/Table Tab -->
  <button
    class="flex-1 py-5 text-center font-medium text-sm transition relative"
    (click)="currentView = 'details'"
    [class.text-black]="currentView === 'details'"
    [class.text-gray-500]="currentView !== 'details'"
    [ngClass]="{
      'active-tab': currentView === 'details',
      'inactive-tab': currentView !== 'details'
    }"
  >
    All Market Engagements
  </button>

  <!-- Stats Tab -->
  <button
    class="flex-1 py-5 text-center font-medium text-sm transition relative"
    (click)="currentView = 'stats'"
    [class.text-black]="currentView === 'stats'"
    [class.text-gray-500]="currentView !== 'stats'"
    [ngClass]="{
      'active-tab': currentView === 'stats',
      'inactive-tab': currentView !== 'stats'
    }"
  >
    All Market Stats
  </button>
</div>

  <!-- Content area -->
  <div *ngIf="currentView === 'details'">
    <!-- Show table in details view -->
    <div *ngIf="hire">
      <app-hires-table
        [talentId]="talentId"
        [hires]="hiresData"
        [selectedScouterId]="selectedScouter?.id"
        (hireSelected)="onHireSelected($event)"
      >
      </app-hires-table>
    </div>
  </div>

  <div *ngIf="currentView === 'stats'">
    <app-stats></app-stats>
  </div>
</ion-content>
