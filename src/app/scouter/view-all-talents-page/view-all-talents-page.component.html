<!-- <ion-app> -->
<ion-header>
  <app-scouter-header
    [class.header-hidden]="headerHidden"
    [class.header-visible]="!headerHidden"
  >
  </app-scouter-header>
</ion-header>

<ion-content class="ion-padding">
  <div class="flex flex-col h-ful">
    <!-- Top card -->
    <div
      class="paid-dark-card-background relative rounded-lg px-4 py-10 mb-6 overflow-hidden h-[20%]"
    >
      <div class="absolute inset-0 bg-black bg-opacity-0 z-0"></div>
      <div class="relative z-10 text-white">
        <div class="flex items-start gap-3">
          <img [src]="images.ViewHireFolderIcon" alt="" />
          <div class="items-center">
            <span class="font-medium text-[24px] leading-tight"
              >Hi Vikiwest,</span
            >
            <p class="text-gray-200 text-lg leading-relaxed">
              View all talents at a glance based on close proximity or needed
              skillset
            </p>
          </div>
        </div>
      </div>
    </div>

    <!-- Info Note -->
    <div
      class="flex items-center gap-3 mb-3 bg-[#CDD5DF33] border border-[#33333333] rounded-xl py-4 mt-[10%]"
    >
      <ion-icon class="h-7 w-1/2" name="information-circle-outline"></ion-icon>
      <span class="font-normal text-[16px] leading-tight text-[#444444]">
        Note: The data below displays professionals in close proximity to your
        address at
        <strong>12, Henry Uzuoma street Awoyaya.</strong>
        If you want to find based on other locations or skillsets,
        <strong (click)="goToTalentLocation()">click here</strong>
      </span>
    </div>

    <!-- TABLE + Pagination -->
    <div class="mt-[20%]">
      <div class="overflow-x-auto bg-white rounded-lg shadow-sm">
        <table class="min-w-full text-sm text-left text-gray-700">
          <thead class="border-b text-xs uppercase text-gray-500">
            <tr>
              <th></th>
              <th class="px-4 py-3">Name</th>
              <th class="px-4 py-3">Proximity</th>
              <th class="px-4 py-3">Skill Level</th>
              <th class="px-4 py-3">Pay Range</th>
              <th class="px-4 py-3">Status</th>
            </tr>
          </thead>

          <tbody
            *ngIf="paginatedHires.length > 0; else noDataTable"
            class="divide-y divide-gray-100"
          >
            <tr
              *ngFor="let hire of paginatedHires"
              (click)="openViewAllTalentsPopupModal(hire)"
              class="hover:bg-gray-50 transition-colors cursor-pointer"
            >
              <td class="px-3 py-3 w-10 text-center">
                <input type="checkbox" class="accent-indigo-600" />
              </td>
              <td
                class="w-[260px] px-3 sm:px-6 py-3 flex items-center gap-2 sm:gap-3"
              >
                <img
                  class="w-8 h-8 sm:w-10 sm:h-10 rounded-full object-cover ring-1 sm:ring-2 ring-gray-100"
                  [src]="hire.profilePic"
                  alt="{{ hire.name }}"
                />
                <div>
                  <p class="text-sm sm:text-base font-medium text-gray-900">
                    {{ hire.name }}
                  </p>
                  <p class="text-xs sm:text-sm text-gray-500">
                    {{ hire.email }}
                  </p>
                </div>
              </td>
              <td
                class="px-3 sm:px-6 py-3 text-xs sm:text-sm text-gray-600 whitespace-nowrap"
              >
                {{ hire.proximity }}
              </td>
              <td
                class="px-3 sm:px-6 py-3 font-semibold text-gray-600 text-sm sm:text-base whitespace-nowrap"
              >
                {{ hire.skillSet[0].skillLevel }}
              </td>
              <td
                class="px-3 sm:px-6 py-3 font-semibold text-gray-600 text-sm sm:text-base whitespace-nowrap"
              >
                {{ hire.payRange }}
              </td>
              <td class="px-3 sm:px-6 py-3 whitespace-nowrap">
                <span
                  class="inline-flex items-center gap-2 px-3 py-1 rounded-full text-xs font-semibold"
                >
                  <span
                    class="h-2 w-2 rounded-full"
                    [style.backgroundColor]="getStatusColor(hire.status)"
                  ></span>
                  <span>{{ hire.status }}</span>
                </span>
              </td>
            </tr>
          </tbody>
        </table>

        <ng-template #noDataTable>
          <tbody>
            <tr>
              <td colspan="6" class="text-center text-gray-500 py-6">
                No hires found
              </td>
            </tr>
          </tbody>
        </ng-template>
      </div>

      <!-- Pagination -->
      <div
        *ngIf="paginatedHires.length > 0"
        class="flex justify-between items-center px-4 sm:px-6 py-3 gap-3 bg-gray-50 border-t border-gray-200"
      >
        <button
          (click)="prevPage()"
          [disabled]="currentPage === 1"
          class="pagination-button flex items-center px-3 py-2 gap-2 border border-gray-500 rounded-lg text-sm font-medium bg-white hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition"
        >
          <ion-icon name="chevron-back-outline"></ion-icon>
          Previous
        </button>

        <span class="flex gap-2 text-xs sm:text-sm text-gray-600 items-center">
          <span
            class="bg-indigo-50 text-indigo-600 font-medium px-2 sm:px-3 py-1 rounded-md"
          >
            {{ currentPage }}
          </span>
          <span class="bg-gray-100 px-2 sm:px-3 py-1 rounded-md">
            {{ totalPages }}
          </span>
        </span>

        <button
          (click)="nextPage()"
          [disabled]="currentPage === totalPages"
          class="pagination-button flex items-center px-3 py-2 gap-2 border border-gray-500 rounded-lg text-sm font-medium bg-white hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition"
        >
          Next <ion-icon name="chevron-forward-outline"></ion-icon>
        </button>
      </div>
    </div>
  </div>
</ion-content>
