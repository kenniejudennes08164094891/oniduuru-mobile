// Variables for easier responsive adjustments
$mobile-breakpoint: 768px;
$tablet-breakpoint: 1024px;
$desktop-breakpoint: 1200px;

$gold-color: #d4af37;
$gold-glow: rgba(212, 175, 55, 0.3);
$dark-bg: rgba(26, 26, 26, 0.6);
$light-stroke: rgba(255, 255, 255, 0.2);

// 1. The Full-Screen Overlay
.loader-container {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  min-height: 100vh;
  min-height: 100dvh; // Dynamic viewport height for mobile browsers
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 9999;
  overflow: hidden;
  
  background-color: $dark-bg;
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  
  transition: opacity 0.8s ease-in-out, visibility 0.8s;
  
  &.fade-out {
    opacity: 0;
    visibility: hidden;
  }
}

.spinner {
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  width: 100%;
  max-width: 1200px; // Prevent excessive stretching on large screens
  padding: 20px;
  box-sizing: border-box;
}

// 2. The African Design Text (Enhanced Responsiveness)
.oniduuru-text {
  font-weight: 900;
  font-family: 'Arial Black', 'Inter', sans-serif;
  text-transform: uppercase;
  position: relative;
  margin: 0;
  text-align: center;
  line-height: 1;
  
  /* Mobile-first font sizing */
  font-size: clamp(2.5rem, 15vw, 5rem); // Fluid typography with limits
  letter-spacing: 0.5px;
  
  // Small tablets and larger phones
  @media (min-width: 480px) {
    font-size: clamp(3rem, 12vw, 6rem);
    letter-spacing: 1px;
  }
  
  // Tablets
  @media (min-width: $mobile-breakpoint) {
    font-size: clamp(5rem, 10vw, 7rem);
    letter-spacing: 2px;
  }
  
  // Desktops
  @media (min-width: $tablet-breakpoint) {
    font-size: 8rem;
    letter-spacing: 4px;
  }
  
  /* African Pattern Implementation */
  background: url('/assets/images/aff.png');
  background-size: 200px; // Start smaller for mobile
  background-repeat: repeat;
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
  color: transparent;
  
  // Increase pattern size on larger screens
  @media (min-width: $mobile-breakpoint) {
    background-size: 250px;
  }
  
  @media (min-width: $tablet-breakpoint) {
    background-size: 300px;
  }
  
  /* Gold Outline and Glow */
  -webkit-text-stroke: 0.5px $gold-color;
  text-stroke: 0.5px $gold-color;
  filter: drop-shadow(0 0 4px $gold-glow);
  
  // Adjust stroke and glow for larger screens
  @media (min-width: $mobile-breakpoint) {
    -webkit-text-stroke: 1px $gold-color;
    text-stroke: 1px $gold-color;
    filter: drop-shadow(0 0 6px $gold-glow);
  }
  
  @media (min-width: $tablet-breakpoint) {
    -webkit-text-stroke: 2px $gold-color;
    text-stroke: 2px $gold-color;
    filter: drop-shadow(0 0 8px $gold-glow);
  }
  
  /* Moving Pattern Animation */
  animation: patternMove 25s linear infinite;
}

// 3. Orbit Container for better centering
.orbit-container {
  position: relative;
  width: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  margin: 20px 0;
  
  @media (min-width: $mobile-breakpoint) {
    margin: 30px 0;
  }
}

// 4. The Orbital Spinners (Enhanced Responsiveness)
.orbit-spinner {
  position: relative;
  pointer-events: none;
  
  .orbit {
    position: absolute;
    border-radius: 50%;
    top: 50%;
    left: 50%;
    transform-origin: center;
  }
  
  // Orbit 1 - Main ring
  .orbit-1 {
    width: 80vw;
    height: 40vw;
    max-width: 500px;
    max-height: 250px;
    border: 1px solid rgba($gold-color, 0.4);
    margin: 0;
    transform: translate(-50%, -50%) rotateX(75deg) rotateY(15deg);
    animation: rotateOrbit1 6s linear infinite;
    
    @media (min-width: $mobile-breakpoint) {
      width: 500px;
      height: 250px;
      border: 1.5px solid rgba($gold-color, 0.4);
    }
    
    @media (orientation: portrait) and (max-height: 700px) {
      width: 70vw;
      height: 35vw;
    }
  }
  
  // Orbit 2 - Dashed ring
  .orbit-2 {
    width: 85vw;
    height: 45vw;
    max-width: 550px;
    max-height: 300px;
    border: 1px dashed $light-stroke;
    margin: 0;
    transform: translate(-50%, -50%) rotateX(75deg) rotateY(-15deg);
    animation: rotateOrbit2 10s linear infinite reverse;
    
    @media (min-width: $mobile-breakpoint) {
      width: 550px;
      height: 300px;
      border: 1.5px dashed $light-stroke;
    }
    
    @media (orientation: portrait) and (max-height: 700px) {
      width: 75vw;
      height: 40vw;
    }
  }
}

// 5. Loading Text (Enhanced Responsiveness)
.loading-subtitle {
  margin-top: 15px;
  color: $gold-color;
  font-family: 'Segoe UI', 'Inter', sans-serif;
  letter-spacing: 2px;
  font-size: 0.75rem;
  text-transform: uppercase;
  text-align: center;
  animation: pulse 2s ease-in-out infinite;
  padding: 0 20px;
  word-break: keep-all;
  white-space: nowrap;
  
  // Small devices
  @media (min-width: 375px) {
    font-size: 0.85rem;
    letter-spacing: 3px;
  }
  
  // Tablets
  @media (min-width: $mobile-breakpoint) {
    margin-top: 30px;
    letter-spacing: 6px;
    font-size: 1rem;
  }
  
  // Desktops
  @media (min-width: $tablet-breakpoint) {
    letter-spacing: 8px;
    font-size: 1.2rem;
  }
  
  // Prevent text from getting too large on very wide screens
  @media (min-width: 1600px) {
    font-size: 1.5rem;
  }
  
  // Handle landscape orientation on mobile
  @media (max-height: 500px) and (orientation: landscape) {
    margin-top: 10px;
    font-size: 0.7rem;
    letter-spacing: 2px;
  }
}

/* Animations */
@keyframes patternMove {
  from { background-position: 0 0; }
  to { background-position: 1000px 500px; }
}

@keyframes rotateOrbit1 {
  from { transform: translate(-50%, -50%) rotateX(75deg) rotateY(15deg) rotateZ(0deg); }
  to { transform: translate(-50%, -50%) rotateX(75deg) rotateY(15deg) rotateZ(360deg); }
}

@keyframes rotateOrbit2 {
  from { transform: translate(-50%, -50%) rotateX(75deg) rotateY(-15deg) rotateZ(0deg); }
  to { transform: translate(-50%, -50%) rotateX(75deg) rotateY(-15deg) rotateZ(360deg); }
}

@keyframes pulse {
  0%, 100% { 
    opacity: 0.8; 
    transform: scale(1); 
  }
  50% { 
    opacity: 0.4; 
    transform: scale(0.95); 
  }
}

// Accessibility: Reduced motion preference
@media (prefers-reduced-motion: reduce) {
  .oniduuru-text,
  .orbit-spinner .orbit,
  .loading-subtitle {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
  }
}
